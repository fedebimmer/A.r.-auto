<html lang="it" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Richiesta Preventivo/Ordine</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script defer src="script.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <div id="welcomeMessage" class="welcome-message"></div>
      Benvenuti in A.R. Auto snc
      <div class="notice"><span class="material-icons">whatsapp</span> È richiesto un account WhatsApp per utilizzare questa pagina.</div>
      
      <!-- Theme toggle moved inside header -->
      <div class="theme-switch">
        <span class="material-icons light-icon">light_mode</span>
        <label class="switch">
          <input type="checkbox" id="themeToggle">
          <span class="slider round"></span>
        </label>
        <span class="material-icons dark-icon">dark_mode</span>
      </div>
    </header>
    
    <form id="requestForm" class="request-form">
      <label class="field-label">
        <span class="material-icons">group</span>
        Seleziona:
      </label>
      <div class="request-type">
        <label>
          <input type="radio" name="userType" value="privato" checked>
          <span>Privato</span>
        </label>
        <label>
          <input type="radio" name="userType" value="azienda">
          <span>Azienda</span>
        </label>
      </div>
      
      <label for="name" class="field-label">
        <span class="material-icons">person</span>
        Chi sei? (Inserisci il tuo nome)
      </label>
      <input type="text" id="name" name="name" required>
      
      <div id="companyWrapper">
        <label for="company" class="field-label">
          <span class="material-icons">business</span>
          Ragione Sociale dell'Officina
        </label>
        <input type="text" id="company" name="company">
      </div>
      
      <label for="vehicle" class="field-label">
        <span class="material-icons">directions_car</span>
        Targa o Numero di Telaio del Veicolo
      </label>
      <input type="text" id="vehicle" name="vehicle" required style="text-transform: uppercase;">
      
      <label class="field-label">
        <span class="material-icons">category</span>
        Tipo di richiesta
      </label>
      <div class="request-type">
        <label>
          <input type="radio" name="requestType" value="Preventivo" checked>
          <span>Preventivo</span>
        </label>
        <label>
          <input type="radio" name="requestType" value="Ordine">
          <span>Ordine</span>
        </label>
      </div>

      <label for="priority" class="field-label">
        <span class="material-icons">priority_high</span>
        Quanto è urgente la tua richiesta?
        <span class="priority-info">
          <span class="material-icons info-icon">info</span>
          <span class="info-tooltip">
            Ti preghiamo di utilizzare l'opzione "Alta Urgenza" solo in caso di reale necessità, 
            per permetterci di gestire al meglio tutte le richieste. 
            Il tempo di elaborazione varia dai 5 ai 40 minuti in base al numero di richieste in attesa.
          </span>
        </span>
      </label>
      <select id="priority" name="priority">
        <option value="bassa">Bassa Urgenza</option>
        <option value="media" selected>Media Urgenza</option>
        <option value="alta">Alta Urgenza</option>
      </select>
      
      <!-- Accordion menu for pickup date/time -->
      <div id="pickupWrapper" class="pickup-wrapper" style="display: none;">
        <button type="button" class="accordion" id="pickupAccordion">
          <span class="material-icons">schedule</span>
          Indica la data e l'ora preferita per il ritiro del tuo ricambio
          <span class="material-icons accordion-icon">expand_more</span>
        </button>
        <div class="accordion-content">
          <div class="pickup-fields">
            <div class="pickup-field">
              <label for="pickupDate" class="field-label">
                <span class="material-icons">calendar_today</span>
                Data di ritiro
              </label>
              <input type="date" id="pickupDate" name="pickupDate">
              <div class="error-message" id="dateError"></div>
            </div>
            
            <div class="pickup-field">
              <label for="pickupTime" class="field-label">
                <span class="material-icons">access_time</span>
                Ora di ritiro
              </label>
              <input type="time" id="pickupTime" name="pickupTime" min="09:00" max="18:00" step="900">
              <div class="error-message" id="timeError"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="description-header">
        <label for="description" class="field-label">
          <span class="material-icons">description</span>
          Quale ricambio stai cercando?
        </label>
        <div class="description-subtitle">
          <span class="material-icons arrow-down">arrow_downward</span>
          Descrivi di quale ricambio hai bisogno
        </div>
      </div>
      <textarea id="description" name="description" maxlength="500"></textarea>
      <div class="whatsapp-notice">
        <span class="material-icons">info</span>
        Dopo aver premuto 'Invia', verrai reindirizzato al nostro account WhatsApp. Lì potrai inviare documenti e foto per completare la tua richiesta.
      </div>
      
      <button type="submit" id="submitBtn">
        <span class="material-icons">send</span>
        Invia
      </button>
      <button type="button" id="clearDataBtn" class="clear-btn">
        <span class="material-icons">delete</span>
        Cancella dati salvati
      </button>
    </form>
    <div id="successMessage" class="success-message">
      <span class="material-icons success-icon">check_circle</span>
      Richiesta inviata con successo su WhatsApp! Riceverai una risposta entro circa 30 minuti.<br>
      ID richiesta: <span id="requestId"></span><br>
      Assicurati di inviare l'ordine su WhatsApp!
    </div>
  </div>
</body>
</html>